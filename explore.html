<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explore Careers | CareerData</title>

    <link rel="stylesheet" href="css/design-tokens.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/typography.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/charts.css">
    <link rel="stylesheet" href="css/responsive.css">

    <style>
        .explore-header {
            padding: var(--space-8) 0;
            background: var(--color-bg-secondary);
            border-bottom: 1px solid var(--color-border-subtle);
        }

        .explore-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: var(--space-6, 1.5rem);
            padding: var(--space-6, 1.5rem) 0;
            min-height: 600px;
        }

        @media (max-width: 1024px) {
            .explore-layout {
                grid-template-columns: 1fr;
            }

            .filter-sidebar {
                position: fixed;
                left: -320px;
                top: 0;
                height: 100vh;
                width: 300px;
                z-index: 1000;
                transition: left 0.3s ease;
                background: var(--color-bg-secondary);
                padding: var(--space-4);
                overflow-y: auto;
            }

            .filter-sidebar.open {
                left: 0;
            }

            .filter-overlay {
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
                display: none;
            }

            .filter-overlay.open {
                display: block;
            }
        }

        /* CRITICAL: overlay must be fixed positioned to not affect grid */
        .filter-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .filter-sidebar {
            position: sticky;
            top: calc(var(--header-height, 64px) + var(--space-4, 1rem));
            height: fit-content;
            max-height: calc(100vh - var(--header-height, 64px) - var(--space-8, 2rem));
            overflow-y: auto;
            background: var(--color-surface-card, #121924);
            border: 1px solid var(--color-border-subtle, rgba(255, 255, 255, 0.06));
            border-radius: var(--radius-xl, 1rem);
            padding: var(--space-5, 1.25rem);
        }

        .filter-section {
            margin-bottom: var(--space-5);
            padding-bottom: var(--space-5);
            border-bottom: 1px solid var(--color-border-subtle);
        }

        .filter-section:last-child {
            border-bottom: none;
        }

        .filter-title {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-semibold);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-tertiary);
            margin-bottom: var(--space-3);
        }

        .filter-option {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition-colors);
        }

        .filter-option:hover {
            background: var(--color-bg-elevated);
        }

        .filter-option input[type="checkbox"] {
            accent-color: var(--color-accent-primary);
        }

        .filter-option label {
            cursor: pointer;
            font-size: var(--font-size-sm);
        }

        .filter-option .count {
            margin-left: auto;
            font-size: var(--font-size-xs);
            color: var(--color-text-tertiary);
        }

        .range-slider {
            width: 100%;
            margin: var(--space-2) 0;
        }

        .range-values {
            display: flex;
            justify-content: space-between;
            font-size: var(--font-size-xs);
            color: var(--color-text-tertiary);
        }

        .results-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-4);
            margin-bottom: var(--space-4);
            flex-wrap: wrap;
        }

        .results-count {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        .sort-controls {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .sort-select {
            padding: var(--space-2) var(--space-3);
            background: var(--color-bg-elevated);
            border: 1px solid var(--color-border-default);
            border-radius: var(--radius-md);
            color: var(--color-text-primary);
            font-size: var(--font-size-sm);
        }

        .view-toggle {
            display: flex;
            background: var(--color-bg-elevated);
            border-radius: var(--radius-md);
            overflow: hidden;
            border: 1px solid var(--color-border-subtle);
        }

        .view-toggle button {
            padding: var(--space-2) var(--space-3);
            background: transparent;
            border: none;
            color: var(--color-text-tertiary);
            cursor: pointer;
            transition: var(--transition-colors);
        }

        .view-toggle button.active {
            background: var(--color-accent-primary);
            color: var(--color-text-inverse);
        }

        .careers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--space-4, 1rem);
            width: 100%;
        }

        .careers-list .job-card {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: var(--space-4);
        }

        .careers-list .job-card-header {
            flex: 1;
        }

        .careers-list .job-card-stats {
            flex-shrink: 0;
        }

        .mobile-filter-btn {
            display: none;
            position: fixed;
            bottom: var(--space-4);
            right: var(--space-4);
            z-index: 100;
        }

        @media (max-width: 1024px) {
            .mobile-filter-btn {
                display: flex;
            }
        }

        .tier-filter-chips {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
        }

        .tier-chip {
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: var(--transition-all);
            border: 1px solid var(--color-border-subtle);
            background: transparent;
        }

        .tier-chip:hover {
            background: var(--color-bg-elevated);
        }

        .tier-chip.active {
            border-color: var(--color-accent-primary);
            background: rgba(106, 169, 255, 0.1);
        }

        .tier-chip.tier-0 {
            color: var(--color-tier-0);
        }

        .tier-chip.tier-1 {
            color: var(--color-tier-1);
        }

        .tier-chip.tier-2 {
            color: var(--color-tier-2);
        }

        .tier-chip.tier-3 {
            color: var(--color-tier-3);
        }

        .tier-chip.tier-4 {
            color: var(--color-tier-4);
        }

        .tier-chip.tier-5 {
            color: var(--color-tier-5);
        }

        .tier-chip.tier-0.active {
            background: var(--color-tier-0-bg);
            border-color: var(--color-tier-0);
        }

        .tier-chip.tier-1.active {
            background: var(--color-tier-1-bg);
            border-color: var(--color-tier-1);
        }

        .tier-chip.tier-2.active {
            background: var(--color-tier-2-bg);
            border-color: var(--color-tier-2);
        }

        .tier-chip.tier-3.active {
            background: var(--color-tier-3-bg);
            border-color: var(--color-tier-3);
        }

        .tier-chip.tier-4.active {
            background: var(--color-tier-4-bg);
            border-color: var(--color-tier-4);
        }

        .tier-chip.tier-5.active {
            background: var(--color-tier-5-bg);
            border-color: var(--color-tier-5);
        }
    </style>
</head>

<script src="js/careers-data.js"></script>
<script src="js/careers-data-t0-part1.js"></script>
<script src="js/careers-data-t0-part2.js"></script>
<script src="js/careers-data-t0-part3.js"></script>
<script src="js/careers-data-t1-part1.js"></script>
<script src="js/careers-data-t1-part2.js"></script>
<script src="js/careers-data-t1-part3.js"></script>
<script src="js/careers-data-t2.js"></script>
<script src="js/careers-data-t3.js"></script>
<script src="js/careers-data-t4.js"></script>
<script src="js/careers-data-t5.js"></script>
</head>

<body>
    <div class="app">
        <!-- Header -->
        <header class="app-header">
            <div class="container flex items-center justify-between h-full">
                <a href="index.html" class="flex items-center gap-2" style="text-decoration: none;">
                    <span style="font-size: 1.5rem;">üìä</span>
                    <span class="font-bold text-lg">CareerData</span>
                </a>

                <nav class="flex items-center gap-6 md-show">
                    <a href="explore.html" class="text-accent font-medium" style="text-decoration: none;">Explore</a>
                    <a href="compare.html" class="text-secondary font-medium" style="text-decoration: none;">Compare</a>
                    <a href="analytics.html" class="text-secondary font-medium"
                        style="text-decoration: none;">Analytics</a>
                </nav>

                <div class="flex items-center gap-3">
                    <input type="text" class="input search-input" placeholder="Search careers..." style="width: 200px;"
                        id="search-input">
                </div>
            </div>
        </header>

        <!-- Explore Header -->
        <section class="explore-header">
            <div class="container">
                <h1 class="h2 mb-4">Explore Careers</h1>

                <!-- Quick Tier Filters -->
                <div class="tier-filter-chips">
                    <button class="tier-chip active" data-tier="all">All Tiers</button>
                    <button class="tier-chip tier-0" data-tier="0">T0 Owner Now</button>
                    <button class="tier-chip tier-1" data-tier="1">T1 Cert-Based</button>
                    <button class="tier-chip tier-2" data-tier="2">T2 Journeyman</button>
                    <button class="tier-chip tier-3" data-tier="3">T3 Master</button>
                    <button class="tier-chip tier-4" data-tier="4">T4 Supervisor</button>
                    <button class="tier-chip tier-5" data-tier="5">T5 Via Subs</button>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <main class="container">
            <div class="explore-layout">
                <!-- Filter Sidebar -->
                <aside class="filter-sidebar" id="filter-sidebar">
                    <div class="flex justify-between items-center mb-4 lg-hide">
                        <span class="font-semibold">Filters</span>
                        <button class="btn btn-ghost btn-sm" onclick="toggleFilters()">‚úï</button>
                    </div>

                    <div class="filter-section">
                        <div class="filter-title">Category</div>
                        <div class="filter-option">
                            <input type="checkbox" id="cat-mechanical" checked>
                            <label for="cat-mechanical">Mechanical Trades</label>
                            <span class="count">18</span>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="cat-electrical" checked>
                            <label for="cat-electrical">Electrical Trades</label>
                            <span class="count">12</span>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="cat-construction" checked>
                            <label for="cat-construction">Construction</label>
                            <span class="count">24</span>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="cat-technology" checked>
                            <label for="cat-technology">Technology Systems</label>
                            <span class="count">15</span>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="cat-interior" checked>
                            <label for="cat-interior">Interior Finishing</label>
                            <span class="count">10</span>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="cat-exterior" checked>
                            <label for="cat-exterior">Exterior & Landscaping</label>
                            <span class="count">14</span>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="cat-specialty" checked>
                            <label for="cat-specialty">Specialty Trades</label>
                            <span class="count">8</span>
                        </div>
                    </div>

                    <div class="filter-section">
                        <div class="filter-title">Salary Range</div>
                        <input type="range" class="range-slider" min="30000" max="120000" value="30000" id="salary-min">
                        <div class="range-values">
                            <span>$30k</span>
                            <span id="salary-display">$30k+</span>
                        </div>
                    </div>

                    <div class="filter-section">
                        <div class="filter-title">Time to Ownership</div>
                        <div class="filter-option">
                            <input type="checkbox" id="time-immediate" checked>
                            <label for="time-immediate">Immediate (0-6 mo)</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="time-short" checked>
                            <label for="time-short">Short (6mo - 2yr)</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="time-medium" checked>
                            <label for="time-medium">Medium (2-5yr)</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="time-long" checked>
                            <label for="time-long">Long (5+ yr)</label>
                        </div>
                    </div>

                    <div class="filter-section">
                        <div class="filter-title">Growth Outlook</div>
                        <div class="filter-option">
                            <input type="checkbox" id="growth-high" checked>
                            <label for="growth-high">High Growth (8%+)</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="growth-avg" checked>
                            <label for="growth-avg">Average (4-8%)</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="growth-low" checked>
                            <label for="growth-low">Below Average</label>
                        </div>
                    </div>

                    <div class="filter-section">
                        <div class="filter-title">Physical Demands</div>
                        <div class="filter-option">
                            <input type="checkbox" id="phys-light" checked>
                            <label for="phys-light">Light</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="phys-medium" checked>
                            <label for="phys-medium">Medium</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="phys-heavy" checked>
                            <label for="phys-heavy">Heavy</label>
                        </div>
                    </div>

                    <button class="btn btn-secondary w-full" onclick="clearFilters()">Clear All Filters</button>
                </aside>

                <div class="filter-overlay" id="filter-overlay" onclick="toggleFilters()"></div>

                <!-- Results -->
                <section class="results">
                    <div class="results-header">
                        <div>
                            <span class="results-count"><strong id="results-count">20</strong> careers found</span>
                        </div>

                        <div class="sort-controls">
                            <label class="text-sm text-secondary">Sort by:</label>
                            <select class="sort-select" id="sort-select">
                                <option value="salary-desc">Median Salary (High-Low)</option>
                                <option value="salary-asc">Median Salary (Low-High)</option>
                                <option value="top10-desc">Top 10% Salary (Potential)</option>
                                <option value="time-asc">Time to Start (Fastest)</option>
                                <option value="growth-desc">Growth Rate (Highest)</option>
                                <option value="name-asc">Name (A-Z)</option>
                            </select>

                            <div class="view-toggle">
                                <button class="active" data-view="grid" title="Grid View">‚ñ¶</button>
                                <button data-view="list" title="List View">‚ò∞</button>
                            </div>
                        </div>
                    </div>

                    <div class="careers-grid" id="careers-container">
                        <!-- Cards generated by JavaScript -->
                    </div>
                </section>
            </div>
        </main>

        <!-- Mobile Filter Button -->
        <button class="mobile-filter-btn btn btn-primary" onclick="toggleFilters()">
            üéöÔ∏è Filters
        </button>

        <!-- Footer -->
        <footer class="footer">
            <div class="container text-center">
                <p class="text-sm text-tertiary">
                    ¬© 2024 CareerData. Data for informational purposes only.
                </p>
            </div>
        </footer>
    </div>

    <script>
        // Initialize Data
        let allCareers = [];
        let filteredCareers = [];

        // Wait for data to load
        window.addEventListener('load', function () {
            // Aggregate all careers from the global object
            if (window.CAREERS_DATA) {
                allCareers = Object.entries(window.CAREERS_DATA).map(([id, c]) => {
                    // Enrich with helper values for sorting/filtering
                    c.id = id;
                    c.salaryMedian = c.salary ? c.salary.median : 0;
                    c.salaryTop10 = c.salary ? c.salary.top10 : 0;
                    c.growthVal = c.growth ? (typeof c.growth === 'number' ? c.growth : parseInt(c.growth)) : 0;

                    // Parse Time to Own for sorting (heuristic)
                    c.timeVal = parseTimeVal(c.timeToOwn);

                    // Normalize Category
                    c.catNormalized = c.category || "Specialty";

                    return c;
                });

                // Initial Render
                applyFilters();
            } else {
                console.error("CAREERS_DATA not found!");
            }
        });

        // Helper to parse time string to months
        function parseTimeVal(timeStr) {
            if (!timeStr) return 0;
            const str = timeStr.toLowerCase();
            if (str.includes('month')) {
                return parseInt(str) || 1;
            } else if (str.includes('year')) {
                return (parseInt(str) || 1) * 12;
            }
            return 0;
        }

        // Render Function
        function renderCareers(careers) {
            const container = document.getElementById('careers-container');
            container.innerHTML = '';

            if (careers.length === 0) {
                container.innerHTML = '<div class="no-results" style="grid-column: 1/-1; text-align: center; padding: 2rem; color: var(--color-text-secondary);">No careers match your filters. Try adjusting them.</div>';
                document.getElementById('results-count').textContent = '0';
                return;
            }

            careers.forEach(c => {
                const id = c.id || c.name.toLowerCase().replace(/[^a-z0-9]+/g, '-');
                const tierLabel = ['Owner Now', 'Cert-Based', 'Journeyman', 'Master', 'Supervisor', 'Via Subs'][c.tier] || `Tier ${c.tier}`;

                container.innerHTML += `
                <div class="job-card" data-tier="${c.tier}" data-cat="${c.category}" onclick="location.href='job.html?id=${id}'">
                    <div class="job-card-header">
                        <div>
                            <h3 class="job-card-title">${c.name}</h3>
                            <span class="job-card-category">${c.category}</span>
                        </div>
                        <span class="tier-badge tier-badge-${c.tier}">T${c.tier}</span>
                    </div>
                    <div class="job-card-stats">
                        <div class="job-card-stat">
                            <span class="job-card-stat-label">Median</span>
                            <span class="job-card-stat-value">$${(c.salaryMedian / 1000).toFixed(0)}k</span>
                        </div>
                        <div class="job-card-stat">
                            <span class="job-card-stat-label">Top 10%</span>
                            <span class="job-card-stat-value">$${(c.salaryTop10 / 1000).toFixed(0)}k</span>
                        </div>
                    </div>
                    <div class="job-card-stats" style="margin-top: 0.5rem; border-top: 1px solid var(--color-border-subtle); padding-top: 0.5rem;">
                         <div class="job-card-stat">
                            <span class="job-card-stat-label">Growth</span>
                            <span class="job-card-stat-value" style="color: ${c.growthVal >= 8 ? 'var(--color-success)' : 'inherit'}">${c.growthVal}%</span>
                        </div>
                         <div class="job-card-stat">
                            <span class="job-card-stat-label">Entry</span>
                            <span class="job-card-stat-value">${c.timeToOwn || 'N/A'}</span>
                        </div>
                    </div>
                </div>`;
            });
            document.getElementById('results-count').textContent = careers.length;
        }

        // --- Core Filter Logic ---
        function applyFilters() {
            // 1. Get Active Filters

            // Tier
            const activeTierChip = document.querySelector('.tier-chip.active');
            const targetTier = activeTierChip ? activeTierChip.dataset.tier : 'all';

            // Categories
            const checkedCats = [];
            if (document.getElementById('cat-mechanical').checked) checkedCats.push('Mechanical');
            if (document.getElementById('cat-electrical').checked) checkedCats.push('Electrical');
            if (document.getElementById('cat-construction').checked) checkedCats.push('Construction');
            if (document.getElementById('cat-technology').checked) checkedCats.push('Technology');
            if (document.getElementById('cat-interior').checked) checkedCats.push('Interior');
            if (document.getElementById('cat-exterior').checked) checkedCats.push('Exterior');
            if (document.getElementById('cat-specialty').checked) checkedCats.push('Specialty', 'Industrial', 'Management', 'Engineering', 'Restoration'); // Grouping minor cats

            // Salary
            const minSalary = parseInt(document.getElementById('salary-min').value);

            // Time
            const timeFilters = {
                immediate: document.getElementById('time-immediate').checked, // 0-6mo (0-6)
                short: document.getElementById('time-short').checked, // 6mo-2yr (6-24)
                medium: document.getElementById('time-medium').checked, // 2-5yr (24-60)
                long: document.getElementById('time-long').checked // 5yr+ (60+)
            };

            // Growth
            const growthFilters = {
                high: document.getElementById('growth-high').checked, // 8%+
                avg: document.getElementById('growth-avg').checked, // 4-7%
                low: document.getElementById('growth-low').checked // <4%
            };


            // 2. Filter Data
            filteredCareers = allCareers.filter(c => {
                // Tier
                if (targetTier !== 'all' && c.tier !== parseInt(targetTier)) return false;

                // Category (Loose Matching)
                // If the exact category isn't in checked list, check if it falls under "Specialty" mapping
                let catMatch = checkedCats.includes(c.category);
                if (!catMatch && checkedCats.includes('Specialty')) {
                    // Fallback for categories not explicitly listed in checkboxes
                    if (['Industrial', 'Management', 'Engineering', 'Restoration'].includes(c.category)) catMatch = true;
                }
                // Also handle "Technology" vs "Technology Systems" label mismatch if any

                if (!catMatch) return false;

                // Salary
                if (c.salaryMedian < minSalary) return false;

                // Time
                let timeMatch = false;
                if (timeFilters.immediate && c.timeVal <= 6) timeMatch = true;
                if (timeFilters.short && c.timeVal > 6 && c.timeVal <= 24) timeMatch = true;
                if (timeFilters.medium && c.timeVal > 24 && c.timeVal <= 60) timeMatch = true;
                if (timeFilters.long && c.timeVal > 60) timeMatch = true;
                if (!timeMatch) return false;

                // Growth
                let growthMatch = false;
                if (growthFilters.high && c.growthVal >= 8) growthMatch = true;
                if (growthFilters.avg && c.growthVal >= 4 && c.growthVal < 8) growthMatch = true;
                if (growthFilters.low && c.growthVal < 4) growthMatch = true;
                if (!growthMatch) return false;

                return true;
            });

            // 3. Sort
            sortCareers();
        }

        function sortCareers() {
            const sortVal = document.getElementById('sort-select').value;

            filteredCareers.sort((a, b) => {
                switch (sortVal) {
                    case 'salary-desc': return b.salaryMedian - a.salaryMedian;
                    case 'salary-asc': return a.salaryMedian - b.salaryMedian;
                    case 'top10-desc': return b.salaryTop10 - a.salaryTop10;
                    case 'time-asc': return a.timeVal - b.timeVal;
                    case 'growth-desc': return b.growthVal - a.growthVal;
                    case 'name-asc': return a.name.localeCompare(b.name);
                    default: return 0;
                }
            });

            renderCareers(filteredCareers);
        }

        // --- Event Listeners ---

        // Tier Chips
        document.querySelectorAll('.tier-chip').forEach(chip => {
            chip.addEventListener('click', function () {
                document.querySelectorAll('.tier-chip').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                applyFilters();
            });
        });

        // Checkboxes & Slider
        document.querySelectorAll('.filter-sidebar input').forEach(input => {
            input.addEventListener('change', applyFilters);
            input.addEventListener('input', function () {
                // Real-time update for slider text
                if (this.type === 'range') {
                    document.getElementById('salary-display').textContent = '$' + (parseInt(this.value) / 1000) + 'k+';
                }
            });
        });

        // Slider Change (trigger filter only on change commit to avoid lag if heavy, though js is fast here)
        document.getElementById('salary-min').addEventListener('change', applyFilters);

        // Sort
        document.getElementById('sort-select').addEventListener('change', sortCareers);

        // Clear Filters
        window.clearFilters = function () { // Expose to global scope for onclick
            document.querySelectorAll('.filter-sidebar input[type="checkbox"]').forEach(cb => cb.checked = true);
            document.getElementById('salary-min').value = 30000;
            document.getElementById('salary-display').textContent = '$30k+';

            document.querySelectorAll('.tier-chip').forEach(c => c.classList.remove('active'));
            document.querySelector('.tier-chip[data-tier="all"]').classList.add('active');

            document.getElementById('sort-select').value = 'salary-desc';

            applyFilters();
        }

        // Toggle mobile filters
        window.toggleFilters = function () {
            document.getElementById('filter-sidebar').classList.toggle('open');
            document.getElementById('filter-overlay').classList.toggle('open');
        }

        // View toggle
        document.querySelectorAll('.view-toggle button').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.view-toggle button').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                const container = document.getElementById('careers-container');
                if (this.dataset.view === 'list') {
                    container.classList.remove('careers-grid');
                    container.classList.add('careers-list');
                } else {
                    container.classList.remove('careers-list');
                    container.classList.add('careers-grid');
                }
            });
        });

        // Search
        document.getElementById('search-input').addEventListener('input', function () {
            const query = this.value.toLowerCase();
            // We search against the *filtered* list or *ALL* list? 
            // Usually search overrides filters or works with them. Let's work WITH them for now, or search all.
            // Let's make search a separate filter step or just apply it here.
            // Simple approach: Search filters the ALL list, then we apply other filters? Or search acts as a text filter.

            // Re-run apply filters which should include search.
            // Let's add search logic to applyFilters for consistency.
            // But for now, let's just quick filter the current view for responsiveness.

            const searchResults = filteredCareers.filter(c =>
                c.name.toLowerCase().includes(query) || c.category.toLowerCase().includes(query)
            );
            renderCareers(searchResults);
        });
    </script>
</body>

</html>